<!doctype html>
<html>
<head>
    <title> Netflix Remote </title>
    
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,700" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" type="text/css" href="./main.css" />
</head>
<body>
  
  <main>
    <div>
      <h1> Netflix Remote </h1>
    </div>
    <div>
      <h2 id="current-title"></h2>
    </div>
    <div>
      <div id="timeline">
        <div class="label" id="time-elapsed"> X X X </div>
        <div id="bar">
          <div id="current-position"></div>
        </div>
        <div class="label" id="time-duration"> X X X </div>
      </div>
      <button id="play">Play</button> <button id="pause">Pause</button>
    </div>
  </main>
  
  <script type="application/javascript" src="/socket.io/socket.io.js"></script>
  <script type="application/javascript" src="./bower_components/moment/moment.js"></script>
  <script type="application/javascript" src="./bower_components/aja/aja.min.js"></script>
  <script type="application/javascript">
    var socket = io('ws://localhost:4545');
    
    var timeA = Date.now();
    var timeB = timeA - (3898.197333 * 1000);
    
    console.log(moment(timeA).diff(moment(timeB), 'minutes') + ' minutes');
  
    var $title = document.getElementById('current-title');
    var $timeElapsed = document.getElementById('time-elapsed');
    var $timeDuration = document.getElementById('time-duration');
    var $play = document.getElementById('play');
    var $pause = document.getElementById('pause');
    
    $play.addEventListener('click', () => {
      aja().url('/play').go();
    });
    
    $pause.addEventListener('click', () => {
      aja().url('/pause').go();
    });
    
    socket.on('video-info', (info) => {
      if(!info) return;
      
      
      if(info.title) {
        $title.innerText = 'Now Playing: ' + info.title;
      }
      
      if(info.duration) {
        $timeDuration.innerText = info.duration;
      }
    });
    
    socket.on('current-time', (timeElapsed) => {
      $timeElapsed.innerText = Math.round(timeElapsed);
    });
  </script>
</body>
</html>
